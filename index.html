<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bullish Friends</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Animated Background Elements -->
    <div class="background-animation">
        <?php for ($i = 1; $i <= 16; $i++): ?>
        <div class="particle" style="--i: <?= $i ?>"></div>
        <?php endfor; ?>
    </div>

    <!-- Header Section -->
    <header class="sticky-header">
        <img src="src/1.webp" alt="Logo" class="logo-parallax">
        <div class="header-controls">
            <div class="social-icons">
                <a href="https://t.me/Bullish_Friends" target="_blank" class="social-icon">
                    <i class="fab fa-telegram"></i>
                </a>
                <a href="https://x.com/bullish_friend" target="_blank" class="social-icon">
                    <i class="fab fa-x-twitter"></i>
                </a>
            </div>
            <button class="buy-button" onclick="window.open('https://meme.cooking/meme/1254', '_blank')">
                BUY NOW <i class="fas fa-rocket"></i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Token Address -->
        <div class="token-container">
            <div class="token-address" onclick="copyAddress()">
                CA: bullish-1254.meme-cooking.near
                <div class="toast">Copied!</div>
            </div>
        </div>

        <!-- Unified Meme Gallery -->
        <div class="unified-gallery" id="gallery"></div>
    </main>

    <!-- Meme Modal -->
    <div class="meme-modal" id="modal">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <div class="modal-content" id="modal-content"></div>
    </div>

    <script>
        // Configuration
        const totalImages = 70;
        const totalVideos = 6;
        const backgroundParticles = 16;

        // Generate Gallery
        function generateGallery() {
            const gallery = document.getElementById('gallery');
            
            // Add images
            for (let i = 1; i <= totalImages; i++) {
                gallery.appendChild(createMediaElement(
                    `memes/meme${i}.webp`, 
                    'image'
                ));
            }
            
            // Add videos
            for (let i = 1; i <= totalVideos; i++) {
                gallery.appendChild(createMediaElement(
                    `meme%20videos/${i}.webm`,
                    'video'
                ));
            }
        }

        function createMediaElement(src, type) {
            const container = document.createElement('div');
            container.className = `meme-item ${type}-container`;
            
            if (type === 'image') {
                const img = document.createElement('img');
                img.src = src;
                img.loading = "lazy";
                container.appendChild(img);
            } else {
                const video = document.createElement('video');
                video.innerHTML = `<source src="${src}" type="video/webm">`;
                video.loop = true;
                video.addEventListener('mouseenter', () => video.play());
                video.addEventListener('mouseleave', () => video.pause());
                container.appendChild(video);
            }

            container.addEventListener('click', () => openModal(src, type));
            return container;
        }

        // Modal Functions
        function openModal(src, type) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modal-content');
            
            content.innerHTML = type === 'image' 
                ? `<img src="${src}" alt="Fullscreen meme">`
                : `<video controls autoplay><source src="${src}" type="video/webm"></video>`;

            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        // Copy Address
        function copyAddress() {
            navigator.clipboard.writeText("bullish-1254.meme-cooking.near");
            showToast();
        }

        function showToast() {
            const toast = document.querySelector('.toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            generateGallery();
            initParallax();
        });

        // Parallax Effect
        function initParallax() {
            const logo = document.querySelector('.logo-parallax');
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                logo.style.transform = `translateY(${scrolled * 0.5}px) 
                                      rotate(${scrolled * 0.2}deg) 
                                      scale(${1 + scrolled * 0.0005})`;
            });
        }
    </script>
</body>
</html>
